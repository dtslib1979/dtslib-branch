{
  "$schema": "./schemas/policy.schema.json",
  "version": "1.0",
  "rules": [
    {
      "id": "no-direct-push",
      "description": "HQ cannot push directly to Cell repos",
      "enforcement": "reject",
      "scope": "downstream"
    },
    {
      "id": "canary-first",
      "description": "All deployments must go through canary tier first",
      "enforcement": "block",
      "scope": "sync"
    },
    {
      "id": "ledger-mandatory",
      "description": "All operations must be recorded in ledger",
      "enforcement": "abort",
      "scope": "all"
    },
    {
      "id": "pr-only-changes",
      "description": "All changes to cells via PR only",
      "enforcement": "reject",
      "scope": "downstream"
    },
    {
      "id": "version-check",
      "description": "Cell must have compatible hqProtocolVersion",
      "enforcement": "warn",
      "scope": "sync"
    }
  ],
  "permissions": {
    "hqAdmin": {
      "registry": "rwd",
      "ledger": "rw",
      "sync": "rwd",
      "policy": "rwd",
      "billing": "rwd"
    },
    "cellOwner": {
      "registry": "r",
      "ledger": "r",
      "sync": "r",
      "policy": "r",
      "billing": "r"
    },
    "llm": {
      "registry": "r",
      "ledger": "w",
      "sync": "-",
      "policy": "r",
      "billing": "-"
    },
    "worker": {
      "registry": "r",
      "ledger": "w",
      "sync": "w",
      "policy": "r",
      "billing": "-"
    }
  }
}
